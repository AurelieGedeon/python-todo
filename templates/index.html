{% extends 'base.html' %} {% block head %}

<title>Task Striker</title>
{% endblock %} {% block body %}

<head>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
    crossorigin="anonymous"
  />
</head>
<div class="content" style="margin-top: 10%">
  <h1 class="headers">Task Striker</h1>
  {% if tasks|length < 1 %}
  <h4 class="headers">
    Hi {{user.first_name}}! You don't seem to have any tasks at the moment.
    Create one below!
  </h4>
  {% else %}
  <div class="dropdown">
    <button
      class="btn btn-secondary dropdown-toggle"
      type="button"
      id="dropdownMenuButton1"
      data-bs-toggle="dropdown"
      aria-expanded="false"
    >
      Filter
    </button>
    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
      <li><a class="dropdown-item" href="/date">Date created</a></li>
      <li><a class="dropdown-item" href="/duedate">Due date</a></li>
      <li><a class="dropdown-item" href="/completed">Completed</a></li>
      <li><a class="dropdown-item" href="/notcompleted">Not completed</a></li>
    </ul>
  </div>

  <table class="table table-bordered table-hover border-dark task-table">
    <tr style="align-content: center">
      <th>Task</th>
      <th>Date Added</th>
      <th>Due By</th>
      <th>Actions</th>
      <th>Completed?</th>
    </tr>
    {% for task in tasks%}
    <tr>
      <td>{{task.content}}</td>
      <td>{{task.data_created.date()}}</td>
      <td>{{task.due_date.date()}}</td>
      <td>
        <a href="/task/{{task.id}}/delete">Delete</a>
        <br />
        <a href="/task/{{task.id}}/update">Update</a>
      </td>
      <td>
        {% if task.is_complete == True %}
        <p>Completed</p>
        <form action="/task/{{task.id}}/undo" method="POST">
          <input type="submit" class="btn btn-outline-warning" value="Undo" />
        </form>
        {% else %}
        <form action="/task/{{task.id}}/complete" method="POST">
          <input
            type="submit"
            class="btn btn-outline-warning"
            value="Complete Task"
          />
        </form>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </table>
  {% endif %}
  <div class="form">
    <form action="/task/add" method="POST">
      <div class="form-floating mb-3">
        <input
          type="text"
          name="content"
          class="form-control"
          id="floatingInput content"
          placeholder="name@example.com"
        />
        <label for="floatingInput">Add a task here</label>
      </div>
      <!-- <input type="text" name="content" id="content" /> -->
      <!-- replace value and min with today's date -->
      <input
        type="date"
        id="due_date"
        name="due_date"
        value="2022-04-11"
        min="2022-04-11"
        max="2028-12-31"
      />
      <input type="submit" class="btn btn-outline-warning" value="Add Task" />
    </form>
  </div>
</div>
<a href="/logout">Logout</a>
{% endblock %}
